<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const missionStatus = document.cookie.split('; ').find(row => row.startsWith('MissionErfolgreich='));
    if (missionStatus && missionStatus.split('=')[1] === 'false') {
        document.body.innerHTML = `
            <style>
                body {
                    background-image: url('bg.jpg');
                    background-size: cover;
                    height: 100vh;
                    margin: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    text-align: center;
                }
                #missionFailedPopup {
                    background-color: #202020;
                    color: red;
                    padding: 20px;
                    border: 2px solid red;
                    font-size: 20px;
                }
            </style>
            <div id="missionFailedPopup">MISSION GESCHEITERT</div>
        `;
    }
});
</script>

    <title>Login Agent Leberkaas</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            text-align: center;
            padding: 20px;
        }
    </style>
    <script>
    function typeWriter(text, i, fnCallback) {
        if (i < text.length) {
            document.getElementById("displayDate").innerHTML = text.substring(0, i+1) +'<span aria-hidden="true"></span>';

            // Warte ein bisschen vor dem nächsten Buchstaben
            setTimeout(function() {
                typeWriter(text, i + 1, fnCallback)
            }, 100);
        }
        // Text wurde komplett angezeigt, rufe Callback auf, wenn vorhanden
        else if (typeof fnCallback == 'function') {
            setTimeout(fnCallback, 700);
        }
    }

    function handleDateSelection() {
        var selectedDate = document.getElementById('dateSelector').value;
        var currentDate = new Date().toISOString().slice(0, 10); // Format YYYY-MM-DD

        // Starte Typewriter-Effekt mit dem ausgewählten Datum
        var welcomeText = "Willkommen Agent Leberkaas. Bitte geben Sie zur Authentifizierung Ihren Geburtstag ein: " + selectedDate;
        typeWriter(welcomeText, 0, function(){
            // Callback-Funktion nachdem der Typewriter-Effekt fertig ist
            if (selectedDate === currentDate) {
                // Zeige das happyBirthday.gif, wenn das ausgewählte Datum heute ist
                var specialImageDiv = document.getElementById('specialImage');
                specialImageDiv.innerHTML = '<img src="happyBirthday.gif" alt="Happy Birthday">';
                
                // Zeige den Weiter-Button nach 5 Sekunden
                setTimeout(function() {
                    var btn = document.createElement("button");
                    btn.innerHTML = "Zur geheimen Nachricht";
                    btn.onclick = function() {
                        window.location.href = 'secondPage.html';
                    };
                    document.body.appendChild(btn);
                }, 5000); // Wartezeit in Millisekunden, hier: 5000ms = 5 Sekunden
            } else {
                // Wenn das Datum nicht heute ist, entferne gif und Button
                document.getElementById('specialImage').innerHTML = '';
            }
        });
    }
</script>


</head>
<body>

<div class="container">
    <h2>Select a Date</h2>
    <input type="date" id="dateSelector" onchange="handleDateSelection()">
    <p id="displayDate">Selected Date: None</p>
    <div id="specialImage"></div> <!-- Container for the special gif and the button -->
</div>

</body>
</html>
